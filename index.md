<link rel="stylesheet" type="text/css" href="style.css" />
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script src="https://code.highcharts.com/modules/sankey.js"></script>
<script src="https://code.highcharts.com/modules/organization.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>	
<script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-tag-cloud.min.js"></script>
<script src="180B.js"> </script>

### Authors: Jerry Qian, Molly Rowland, Arely Vasquez, Chang Yuan, and Raimundo Castro

## Research Question: Can we identify what streaming service provider is being used across a VPN tunnel?  

 **Site Guide**:
- [Project Purpose](#project-purpose)
- [Background Information](#background-information)
- [The Data](#the-data)
  - [Video On Demand](#video-on-demand)
  - [Live Video](#live-video)
- [Comparing the Providers](#comparing-the-providers)
- [The Classifier](#the-classifier)
- [Accomplishments, Limitations, and Future Directions](#accomplishments-limitations-and-future-directions)


## Project Purpose
Over the past two quarters, we have been working with Viasat to understand internet traffic across a VPN. Last quarter, we worked on creating a classifier that was able to idenitify if video was being streamed on a VPN or there was just normal browsing occuring. This prompted our group to take this previous classifier a step further to identify what streaming service provider is being used. With the baseline of identifying video, knowing the service provider provides another layer of information that is valuable for Viasat. 
### When might this information be used?
When it comes to classifying which streaming service provider is being used in a VPN, there are many reasons to collect it. In working with Viasat, their goal as an Internet Service Provider is to offer the best quality experience for their customers. So if they set certain network parameters in place, such as max download rates, certain providers could be more heavily affected. By studying the network patterns of some different service providers and making a tool to classify them, this information can be used to help tune network parameters to optimize streaming for their clients. 

## Background Information
### Key Terms!
- Virtual Private Network (VPN): creates a private network across a public network
- Packet: formatted unit of data carrying information on where to send data and the payload of data
- Byte: data contained in the packet, group of 8 bits 
- Live video: video that is being created and streamed at the same time
- Video on Demand: video that is created and stored on a server accessible at a later time 
  
<div class="row">
  <div class="column">
    <img src="/streaming_provider_classifier_inside_vpn/assets/packet-diagram.png" height="200" >
  </div>
  <div class="column">
    <img src="/streaming_provider_classifier_inside_vpn/assets/byte-diagram.png" height="200" >
  </div>
</div>

### Understanding VPNs
VPNs create a secure network connection over public networks. Some uses for them are protecting data, accessing remote computers, and by passing geographically restricted streaming libraries. Whatever the reason you are using the VPN, you want a fast connection. Below is a diagram explain how VPNs work compared to normal internet traffic. The VPN creates an encryption level to protect your data transfers!


<img src="/streaming_provider_classifier_inside_vpn/assets/vpn-diagram.png" height="400" >

## The Data
The dataset used in this project was generated by our group of 5 students,with the live video sourced from the live video vs video on demand classifying group. We collected data on our personal computers using a script provided by Viasat called Network Stats. The script collects packet data being sent and recieved by our computers. We ran our scripts in conditions that were inside a VPN, at one times speed, and had no additional noise occurring during the capture. We collected data from Youtube, Netflix, Amazon Prime, Twitch, Youtube Live, Disney+, Discovery+, and Hulu. The other category, which helps the robustness of the model classification, is made up of Disney+, Discovery+, and Hulu videos. 

### Video On Demand
<section class = "tabchange">
<p>Click on the boxes to explore data analysis of each provider.</p>
	

  <label FOR="C1"><p style="font-size: large;">Upload Bytes</p></label>
  <input type="Checkbox" id="C1" Value="Upload Bytes" onclick="uploadappear();" checked>



  <label FOR="C2"><p style="font-size: large;">Download Bytes</p></label>
  <input TYPE="Checkbox" id="C2" Value="Download Bytes" onclick="downloadappear();" checked>
  
  <br>
  
  <p id="text1" style="display:none"><b>Upload Packet Data</b>
	<pInsert graphs here</p> 

				
</p>
				
 <div style="line-height:10px;"><br></div> 


  <p id="text2" style="display:none"><b>Download Packet Data</b><br><br>
    <p>insert graphs here</p>
    
  </p>


 </section>
 
 
      
<div class="logos">
 
<img src="/streaming_provider_classifier_inside_vpn/assets/prime.jpg" height="200" >

<img src="/streaming_provider_classifier_inside_vpn/assets/netflix.jpg" height="200" >

<img src="/streaming_provider_classifier_inside_vpn/assets/youtube.png" height="150" >
</div>



### Live Video
<div class="row">
  <div class="column">
    <img src="/streaming_provider_classifier_inside_vpn/assets/twitch.png" height="200" >
  </div>
  <div class="column">
    <img src="/streaming_provider_classifier_inside_vpn/assets/youtube-live.png" height="200" >
  </div>
</div>

## Comparing the Providers
One of the features we looked at was packet frequency. In the chart below, we can see the range of size and frequency for each provider. The chart is normalized for ease of reading, so each providers ratio is out of 1. 
<figure class="highcharts-figure" onload="init()">
    <div id="container"></div>
    <p class="highcharts-description">
    </p>
</figure>
<!--
<figure class="highcharts-figure" onload="init()">
  <p class="highcharts-description">

  <div id="container6"></div> 
</figure>
-->


## The Classifier 
Our model uses a random forest classifier, which is just an ensemble of decision trees! We have engineered 13 features for our random forest classifier. While this may seem like a lot of features, each plays an important role in model performance. When we tried to remove the least significant ones, the model perfomance declined signficantly. This however means we can't show you one of the trees from our random forest classifier because its size and complexity makes it difficult to read. Below is an example of a single tree that would be in our forest of trees to help classify our data. 
<br>
Scroll over each level to learn more about how a decision tree works!
<figure class="highcharts-figure" onload="init()">
    <div id="tree"></div>
    <p class="highcharts-description">
    </p>
</figure>

Our model achieves an accuracy of **96.4%**.

<figure class="highcharts-figure" onload="init()">
    <div id="features"></div>
    <p class="highcharts-description">
    </p>
</figure>

<div class="row">
  <div class="column">
    <img src="/streaming_provider_classifier_inside_vpn/assets/confusion_matrix.png" height="200" >
  </div>
  <div class="column">
    <img src="/streaming_provider_classifier_inside_vpn/assets/normalized_confusion_matrix.png" height="200" >
  </div>
</div>

## Accomplishments, Limitations, and Future Directions

<table>
  <tr>
    <th>Accomplishments</th>
    <th>Limitations</th>
    <th>Future Directions</th>
  </tr>
  <tr>
    <td>Our model performs well on our test data</td>
    <td>Our test data could be more robust</td>
    <td>Create a more robust Dataset</td>
  </tr>
  <tr>
    <td>Potentially Generalizable Features that could be used on new providers</td>
    <td>Currently Can only do our 5 providers against an other category</td>
    <td>Collect more data from different providers and integrate them into the model</td>
  </tr>

</table>

- Currently our data only consist of 1x playback speed and was recorded in a clean setting, meaning there was no other data being sent or recieved, such as with messages or other browsing. We can make it more robust by adding more playback speeds and introducing noisy data into our dataset 

- Currently our model can only identify the 5 streaming providers against an other class. However, this could be improved upon by training the model on more providers. Many more providers are entering the market such as Peacock from NBC, Paramount+, CBS All Access and many more. It will be beneficial for Viasat to understand how these many different providers send data across a VPN, and our model is an awesome tool to do that with!
 
# Thank you for reading!
